/* --- 1. THEMEN & VARIABLEN (Zentrale Steuerung) --- */
:root {
    --sloth-radius: 12px;
    --transition-speed: 0.2s;
    
    /* Status-Farben Basis (werden im Theme zugewiesen) */
}

/* LIGHT THEME (Clean & Soft) */
[data-bs-theme="light"] {
    /* UI Farben */
    --sloth-primary: #2563eb;       /* Kräftiges Royal Blue für guten Kontrast */
    --sloth-primary-hover: #1d4ed8;
    
    --bg-body: #f3f4f6;             /* Kühles Hellgrau */
    --bg-card: #ffffff;
    --bg-tertiary: #f9fafb;
    --border-color: #e5e7eb;
    
    --text-main: #111827;
    --text-muted: #4b5563;          /* Fester Grauwert, keine Opacity! */
    --text-subtle: #6b7280;         /* Noch etwas heller für unwichtiges */

    /* Status Farben (Pastell + Dunkler Text für Kontrast) */
    --st-office-bg: #dcfce7;   --st-office-txt: #14532d;
    --st-home-bg: #e0f2fe;     --st-home-txt: #0c4a6e;
    --st-sick-bg: #fee2e2;     --st-sick-txt: #7f1d1d;
    --st-vacation: #fef3c7;    --st-vacation-txt: #78350f;
    --st-holiday-bg: #f3f4f6;  --st-holiday-txt: #374151;
    
    /* Bootstrap Overrides */
    --bs-primary: var(--sloth-primary);
    --bs-body-bg: var(--bg-body);
    --bs-body-color: var(--text-main);
}

/* DARK THEME (Modern Deep Blue/Gray - GitHub Style) */
[data-bs-theme="dark"] {
    /* UI Farben */
    --sloth-primary: #58a6ff;       /* Helles, freundliches Blau für Darkmode */
    --sloth-primary-hover: #79c0ff;
    
    --bg-body: #0d1117;             /* Sehr dunkles Blau-Grau */
    --bg-card: #161b22;
    --bg-tertiary: #21262d;
    --border-color: #30363d;
    
    --text-main: #f0f6fc;
    --text-muted: #8b949e;          /* Fester Grauwert für Lesbarkeit */
    --text-subtle: #6e7681;

    /* Status Farben (Gedämpft + Heller Text) */
    --st-office-bg: #112519;   --st-office-txt: #4ade80; /* Grün */
    --st-home-bg: #12222e;     --st-home-txt: #38bdf8;   /* Cyan */
    --st-sick-bg: #2e1214;     --st-sick-txt: #f87171;   /* Rot */
    --st-vacation: #2e2208;    --st-vacation-txt: #fcd34d; /* Gelb */
    --st-holiday-bg: #1b1f24;  --st-holiday-txt: #9ca3af;
    
    /* Bootstrap Overrides */
    --bs-primary: var(--sloth-primary);
    --bs-body-bg: var(--bg-body);
    --bs-body-color: var(--text-main);
    --bs-border-color: var(--border-color);
}

/* --- 2. GLOBAL LAYOUT & TYPO --- */
body { 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: background-color var(--transition-speed), color var(--transition-speed);
    display: flex;
    flex-direction: column;
    min-height: 100dvh; /* Mobile Viewport Fix */
}

#main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    width: 100%;
}

/* Text Utilities (Ersetzt Opacity Klassen) */
.text-muted { color: var(--text-muted) !important; }
.text-subtle { color: var(--text-subtle) !important; font-size: 0.85em; }
.fw-bold { font-weight: 600 !important; }

/* Links & Headings */
h1, h2, h3, h4, h5, h6, .h1, .h2, .h3 { color: var(--text-main); }
a { text-decoration: none; color: var(--sloth-primary); }
a:hover { color: var(--sloth-primary-hover); }

/* --- 3. COMPONENTS --- */

/* Cards */
.card, .widget-card { 
    background-color: var(--bg-card); 
    border: 1px solid var(--border-color);
    border-radius: var(--sloth-radius);
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* Subtiler Schatten */
    margin-bottom: 20px;
    overflow: visible;
}

.widget-header {
    padding: 12px 16px;
    font-size: 0.8rem; 
    font-weight: 700; 
    text-transform: uppercase; 
    letter-spacing: 0.05em;
    color: var(--text-subtle);
    border-bottom: 1px solid var(--border-color);
    background-color: var(--bg-tertiary);
    border-radius: var(--sloth-radius) var(--sloth-radius) 0 0;
    display: flex; justify-content: space-between; align-items: center;
}

.widget-body { padding: 16px; }

/* Inputs */
.form-control, .form-select {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-main);
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
}
.form-control:focus, .form-select:focus {
    background-color: var(--bg-card);
    border-color: var(--sloth-primary);
    color: var(--text-main);
    box-shadow: 0 0 0 3px rgba(var(--bs-primary-rgb), 0.15); /* Soft Glow */
}

/* Dashed "Ghost" Button (Modern) */
.btn-dashed {
    border: 2px dashed var(--border-color);
    background: transparent;
    color: var(--text-muted);
    font-weight: 600;
    transition: all 0.2s;
}
.btn-dashed:hover {
    border-color: var(--sloth-primary);
    color: var(--sloth-primary);
    background-color: var(--bg-tertiary);
}

/* Avatar */
.avatar-circle {
    width: 36px; height: 36px; border-radius: 50%;
    background-color: var(--sloth-primary); color: #fff;
    display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 1rem;
    border: 2px solid var(--bg-card); /* Kleiner Rand für Separation */
}

/* --- 4. STATUS & TABELLEN --- */

/* Tabellen Styling */
.table { 
    --bs-table-bg: transparent; 
    color: var(--text-main); 
    border-color: var(--border-color);
}
thead th {
    background-color: var(--bg-tertiary) !important;
    color: var(--text-muted) !important;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.75rem;
    border-bottom: 1px solid var(--border-color);
}
td { border-bottom: 1px solid var(--border-color); }

/* Status Klassen (nutzen Variablen von oben) */
.tr-office   { background-color: var(--st-office-bg) !important; color: var(--st-office-txt) !important; }
.tr-home     { background-color: var(--st-home-bg) !important; color: var(--st-home-txt) !important; }
.tr-sick     { background-color: var(--st-sick-bg) !important; color: var(--st-sick-txt) !important; }
.tr-vacation { background-color: var(--st-vacation) !important; color: var(--st-vacation-txt) !important; }
.tr-holiday  { background-color: var(--st-holiday-bg) !important; color: var(--st-holiday-txt) !important; }
.tr-weekend  { background-color: var(--bg-tertiary) !important; color: var(--text-muted) !important; }

/* Status Badges (Kleine Buttons) */
.btn-xs-status {
    border-radius: 6px; 
    font-weight: bold;
    display: inline-flex; align-items: center; justify-content: center;
    border: 1px solid var(--border-color);
    background: var(--bg-card);
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
}
.btn-xs-status:hover { border-color: var(--text-muted); color: var(--text-main); }

/* Active States für Badges */
.st-f.active { background: var(--st-holiday-txt); color: var(--bg-card); border-color: transparent; }
.st-u.active { background: var(--st-vacation-txt); color: #fff; border-color: transparent; }
.st-k.active { background: var(--st-sick-txt); color: #fff; border-color: transparent; }

/* Type Cards (Linke Spalte Border) */
.type-office { border-left: 4px solid var(--st-office-txt) !important; }
.type-home   { border-left: 4px solid var(--st-home-txt) !important; }
.type-doctor { border-left: 4px solid var(--st-sick-txt) !important; }

/* --- 5. PROGRESS & FOOTER --- */
.progress-sloth { 
    height: 8px; 
    border-radius: 10px; 
    background-color: var(--bg-tertiary); 
    overflow: hidden; 
}
.progress-bar-sloth { 
    height: 100%; 
    background-color: var(--sloth-primary); 
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); 
}

.app-footer {
    text-align: center;
    padding: 3rem 1rem calc(1rem + env(safe-area-inset-bottom));
    color: var(--text-subtle);
    font-size: 0.8rem;
    margin-top: auto;
    width: 100%;
}
.app-footer img {
    opacity: 0.5; 
    filter: grayscale(1); 
    transition: all 0.3s; 
}
.app-footer:hover img { opacity: 1; filter: grayscale(0); transform: rotate(10deg); }

/* --- 6. UTILS --- */
.cursor-pointer { cursor: pointer; }
.bg-body-tertiary { background-color: var(--bg-tertiary) !important; }

/* View Switcher */
.view-switcher {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: 4px;
    display: inline-flex;
}
.view-btn {
    border: none; background: transparent;
    padding: 6px 16px; border-radius: 16px;
    color: var(--text-muted); font-size: 0.9rem;
    transition: all 0.2s;
}
.view-btn.active {
    background: var(--bg-card);
    color: var(--text-main);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    font-weight: 600;
}

/* Sticky Column */
@media (min-width: 992px) {
    .sticky-column { position: sticky; top: 100px; z-index: 900; }
    .mobile-only-switcher { display: none !important; }
}

/* Animations */
.animate-fade { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; transform: translateY(10px); }
@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

.spin-animation { animation: slothSpin 1s ease-in-out; }
@keyframes slothSpin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.2); }
    100% { transform: rotate(360deg) scale(1); }
}

/* Table Input Reset */
.table-input {
    width: 100%; border: none; background: transparent;
    text-align: center; font-weight: 600; color: inherit;
    padding: 2px; border-radius: 4px;
}
.table-input:hover { background: var(--bg-card); box-shadow: 0 0 0 1px var(--border-color); }
.table-input:focus { outline: none; background: var(--bg-card); color: var(--text-main); box-shadow: 0 0 0 2px var(--sloth-primary); }

/* Buttons in Dropdowns & co */
.dropdown-menu { background-color: var(--bg-card); border-color: var(--border-color); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.dropdown-item { color: var(--text-main); }
.dropdown-item:hover { background-color: var(--bg-tertiary); color: var(--sloth-primary); }